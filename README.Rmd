---
output: github_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  echo = FALSE,
  warning = FALSE,
  message = FALSE
)
```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
# Ensure the package is installed
if (!requireNamespace("neuroSCC", quietly = TRUE)) {
  remotes::install_github("iguanamarina/neuroSCC")
}

library(neuroSCC)

# GitHub API setup for dynamic badges
library(httr)
library(jsonlite)

# Define repository info
repo_owner <- "iguanamarina"
repo_name <- "neuroSCC"
base_url <- paste0("https://api.github.com/repos/", repo_owner, "/", repo_name)

# Function to fetch API data safely
fetch_api_data <- function(url) {
  response <- GET(url)
  if (status_code(response) == 200) {
    return(content(response, as = "parsed", encoding = "UTF-8"))
  } else {
    return(NULL)
  }
}

# Fetch dynamic data
contributors <- fetch_api_data(paste0(base_url, "/contributors"))
issues <- fetch_api_data(paste0(base_url, "/issues"))
commits <- fetch_api_data(paste0(base_url, "/commits"))
repo_info <- fetch_api_data(base_url)

# Generate badge URLs
badge_url_contributors <- paste0("https://img.shields.io/badge/Contributors-", length(contributors), "-brightgreen")
badge_url_issues <- paste0("https://img.shields.io/badge/Issues-", length(issues), "-brightgreen")
badge_url_commits <- paste0("https://img.shields.io/badge/Commits-", length(commits), "-brightgreen")
badge_url_size <- paste0("https://img.shields.io/badge/Size-", repo_info$size, "KB-brightgreen")

# Get package version
package_version <- as.character(packageVersion("neuroSCC"))
```


# neuroSCC ----

<a href="https://github.com/iguanamarina/neuroSCC">
  <img src="man/figures/logo.png" align="right" width="120" />
</a>

[![Project Status](http://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/)
[![Lifecycle](https://img.shields.io/badge/lifecycle-Stable-4cc71e.svg)](https://www.tidyverse.org/lifecycle/)
[![Contributors](https://img.shields.io/badge/Contributors-`r length(contributors)`-brightgreen)](https://github.com/iguanamarina/neuroSCC/graphs/contributors)
[![Commits](https://img.shields.io/badge/Commits-`r length(commits)`-brightgreen)](https://github.com/iguanamarina/neuroSCC/commits/main)
[![Issues](https://img.shields.io/badge/Issues-`r length(issues)`-brightgreen)](https://github.com/iguanamarina/neuroSCC/issues)
[![Size](https://img.shields.io/badge/Size-`r repo_info$size`KB-brightgreen)](https://github.com/iguanamarina/neuroSCC)
[![R](https://img.shields.io/badge/R-276DC3.svg?style=for-the-badge&logo=r&logoColor=white)](https://www.r-project.org/)

ğŸš€ **`neuroSCC` facilitates structured processing of PET neuroimaging data for the estimation of Simultaneous Confidence Corridors (SCCs).**  
It integrates neuroimaging and statistical methodologies to:  

- ğŸ“¥ **Load and preprocess** PET neuroimaging files.  
- ğŸ”¬ **Transform data** for **Functional Data Analysis (FDA)**.  
- ğŸ¯ **Extract meaningful contours** and identify significant SCC regions.  
- ğŸ“Š **Compare SCC-based analyses** with gold-standard methods like **SPM**.  

The package bridges established **[neuroimaging tools](https://github.com/bjw34032/oro.nifti)** (`oro.nifti`) with advanced **[statistical methods](https://github.com/FIRST-Data-Lab/ImageSCC)** (`ImageSCC`), supporting **one-group, two-group, and single-patient vs. group comparisons**.  

ğŸ“Œ Developed as part of the **Ph.D. thesis**:  
*"Development of statistical methods for neuroimage data analysis towards early diagnosis of neurodegenerative diseases"*,  
**University of Santiago de Compostela**.  


------------------------------------------------------------------------

# ğŸ“– Table of Contents 

<details open="open">

<summary>ğŸ“– Click to expand</summary>

<ol>

<li><a href="#about-the-project"> â¤ About The Project</a></li>

<li><a href="#installation"> â¤ Installation</a></li>

<li><a href="#basic-usage"> â¤ Basic Usage</a></li>

<li><a href="#functions-overview"> â¤ Functions Overview</a></li>

<li><a href="#vignette"> â¤ Vignette & Full Workflow</a></li>

<li><a href="#references"> â¤ References</a></li>

</ol>

</details>

------------------------------------------------------------------------

# 1ï¸âƒ£ About the Project

## Why Use `neuroSCC`? 

PET neuroimaging data is **complex**, requiring careful **processing and
statistical validation**. `neuroSCC` is designed to:

âœ” **Automate Preprocessing**: Load, clean, and structure PET data ğŸ“‚\
âœ” **Standardize Analysis**: Convert images into FDA-compatible formats
ğŸ”¬\
âœ” **Provide SCC Estimations**: Identify **significant regions** with
confidence ğŸ¯\
âœ” **Enable Method Comparisons**: SCC vs. **SPM performance evaluation**
ğŸ“Š

It is **particularly suited for**: - **Clinical neuroimaging research**
(Alzheimerâ€™s disease, neurodegeneration). - **Statistical validation of
imaging methods**. - **Comparisons between SCC and other statistical
approaches**.

------------------------------------------------------------------------

# 2ï¸âƒ£ Installation

## ğŸ“¦ From GitHub

``` {r echo = T}
# Install the latest development version
remotes::install_github("iguanamarina/neuroSCC")
library(neuroSCC)
```

## ğŸ”œ From CRAN (Future) 

``` {r echo = T}
# Once available on CRAN
# install.packages("neuroSCC")
```

------------------------------------------------------------------------

# 3ï¸âƒ£ Basic Usage

### **Minimal Working Example** 

```{r eval=FALSE, include=TRUE, echo=TRUE}
# Load package
library(neuroSCC)

# Load a PET neuroimaging file
pet_data <- neuroCleaner("path/to/file.nii")

# Process for functional data analysis
processed_data <- matrixCreator(pet_data)

# Compute SCCs
SCC_result <- ImageSCC::scc.image(processed_data)

# Visualize results
plot(SCC_result)
```

------------------------------------------------------------------------

# 4ï¸âƒ£ Functions Overview

This package contains **several core functions** for neuroimaging data
processing:

<details>

<summary>ğŸ§¼ neuroCleaner(): Load & Clean PET Data</summary>

``` {r, eval=F, echo=T}
# Load a NIFTI file and structure the data
clean_data <- neuroCleaner("path/to/file.nii")
head(clean_data)
```

</details>

<details>

<summary>ğŸ“Š databaseCreator(): Convert Multiple Files into a
Database</summary>

``` {r, eval=F, echo=T}
# Process multiple PET images into a database
database <- databaseCreator(pattern = ".*nii")
```

</details>

<details>

<summary>ğŸ“ getDimensions(): Extract Image Dimensions</summary>

``` {r, eval=F, echo=T}
# Extract spatial dimensions of a PET scan
dims <- getDimensions("path/to/file.nii")
```

</details>

<details>

<summary>ğŸ“‰ meanNormalization(): Normalize Data</summary>

``` {r, eval=F, echo=T}
# Apply mean normalization for functional data analysis
normalized_matrix <- meanNormalization(matrixData)
```

</details>

<details>

<summary>ğŸ“ˆ neuroContour(): Extract Contours</summary>

``` {r, eval=F, echo=T}
# Extract region contours from neuroimaging data
contours <- neuroContour("path/to/file.nii")
```

</details>

<details>

<summary>ğŸ”º getPoints(): Identify Significant SCC Differences</summary>

``` {r, eval=F, echo=T}
# Extract significant points from SCC results
points <- getPoints(SCC_result)
```

</details>

------------------------------------------------------------------------

# 5ï¸âƒ£ Vignette & Full Workflow

A full walkthrough of using `neuroSCC` from start to finish is available
in the vignette.

[ğŸ“„ **Click here to view the full
vignette**](https://github.com/iguanamarina/neuroSCC/vignettes/workflow.html)

------------------------------------------------------------------------

# 6ï¸âƒ£ References

-   Wang, Y., Wang, G., Wang, L., Ogden, R.T. (2020). *Simultaneous
    Confidence Corridors for Mean Functions in Functional Data Analysis
    of Imaging Data*. Biometrics, 76(2), 427-437.\
-   [Ph.D. Thesis: Development of statistical methods for neuroimage
    data analysis towards early diagnosis of neurodegenerative
    diseases](https://github.com/iguanamarina/PhD-thesis)

### âœ… **Next Steps**

-   **Review and Edit**: Fill in placeholders `[Explain this]` and
    adjust descriptions.\
-   **Style Tweaks**: Adjust layout, spacing, or visuals as needed.\
-   **Focus on Specific Sections**: Start refining details section by
    section.

Let me know how you'd like to proceed! ğŸš€ \`\`\`

This version: âœ” **Uses the latest DESCRIPTION file information**.\
âœ” **Pulls function descriptions from documentation**.\
âœ” **Improves layout & formatting** for readability.\
âœ” **Ensures structured sections for RStudio Outline**.

Would you like to **iterate on any specific section next**? ğŸš€


------------------------------------------------------------------------

```{r eval=FALSE, include=FALSE}
# Load required packages
library(testthat)
library(roxygen2)
library(devtools)

# Regenerate documentation
roxygen2::roxygenise()
devtools::document() 
pkgload::load_all(".")
devtools::install()

# Version updates
usethis::use_version()
devtools::check() 
devtools::build_manual(pkg = ".", path = getwd())
devtools::build()
```

------------------------------------------------------------------------
