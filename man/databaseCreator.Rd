% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/databaseCreator.R
\name{databaseCreator}
\alias{databaseCreator}
\title{Create a database of processed PET image data}
\usage{
databaseCreator(
  pattern,
  control = TRUE,
  useSequentialNumbering = FALSE,
  demo = NULL,
  quiet = FALSE
)
}
\arguments{
\item{pattern}{\code{character}, a regular expression pattern specifying which files to process.
The function extracts the subject number directly from the filename based on this pattern.}

\item{control}{\code{logical}, if \code{TRUE}, the function processes control group images;
if \code{FALSE}, it processes pathological group images. Default is \code{TRUE}.}

\item{useSequentialNumbering}{\code{logical}, if \code{TRUE}, assigns sequential numbers (1,2,3,...)
to files instead of extracting from filenames. Default is \code{FALSE}.}

\item{demo}{\code{data.frame}, optional demographic data. If provided, this information will be
included in the output database for each file. Default is \code{NULL}.}

\item{quiet}{\code{logical}, if \code{TRUE}, suppresses progress messages. Default is \code{FALSE}.}
}
\value{
A \code{data.frame} that aggregates processed data from all matched images.
        Each row represents data from one voxel (3D pixel), including:
        \itemize{
          \item For control group (\code{control=TRUE}): \code{CN_number}, \code{z}, \code{x}, \code{y}, \code{pet}
          \item For pathological group (\code{control=FALSE}): \code{AD_number}, \code{z}, \code{x}, \code{y}, \code{pet}
          \item If demographic data is provided: Additional columns like \code{PPT}, \code{Group}, \code{Sex}, \code{Age}
        }
        The \code{CN_number} or \code{AD_number} column contains the subject identifier extracted from
        the filename or assigned sequentially. The \code{pet} column contains intensity values.
}
\description{
This function processes PET images based on a specified file name pattern.
It reads each file matching the pattern, processes it using \code{\link{neuroCleaner}},
and compiles the results into a structured data frame.
The function is a key step in the neuroSCC workflow, bridging individual
image processing and preparation for functional data analysis with Simultaneous Confidence Corridors (SCCs).
}
\details{
The function performs the following operations:

\enumerate{
  \item Identifies files in the working directory that match the specified pattern.
  \item For each file:
  \itemize{
    \item Extracts the subject number from the filename (or assigns a sequential number if \code{useSequentialNumbering=TRUE}).
    \item Processes the file using \code{\link{neuroCleaner}}, integrating demographic data if provided.
    \item Adds subject identifier information to each row.
    \item Merges all processed data into a structured database.
  }
}

This function is typically followed by \code{\link{matrixCreator}} in the analysis pipeline,
which transforms the database into a format suitable for SCC computation.
}
\examples{
# Get the file path for sample data
dataDir <- system.file("extdata", package = "neuroSCC")

# Example 1: Create database for Controls
controlPattern <- "^syntheticControl.*\\\\.nii.gz$"
databaseControls <- databaseCreator(pattern = controlPattern, control = TRUE, quiet = TRUE)
head(databaseControls); tail(databaseControls)
nrow(databaseControls)  # Total number of rows
unique(databaseControls$CN_number)  # Show unique subjects

# Example 2: Create database for Pathological group
pathologicalPattern <- "^syntheticPathological.*\\\\.nii.gz$"
databasePathological <- databaseCreator(pattern = pathologicalPattern,
                                        control = FALSE,
                                        quiet = TRUE)
head(databasePathological); tail(databasePathological)
nrow(databasePathological)  # Total number of rows
unique(databasePathological$AD_number)  # Show unique subjects

}
\seealso{
\code{\link{neuroCleaner}} for the underlying image processing function.

\code{\link{matrixCreator}} for the next step in the workflow that converts
the database to a matrix format for SCC analysis.
}
